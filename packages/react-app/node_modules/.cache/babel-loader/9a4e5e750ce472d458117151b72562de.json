{"ast":null,"code":"import{Contract}from\"@ethersproject/contracts\";import{abis}from\"@my-app/contracts\";import{useCall}from\"@usedapp/core\";import{parseUnits}from\"ethers/lib/utils\";import{useEffect}from\"react\";import{ROUTER_ADDRESS}from\"../config\";export var getAvailableTokens=function getAvailableTokens(pools){return pools.reduce(function(prev,curr){prev[curr.token0Address]=curr.token0Name;prev[curr.token1Address]=curr.token1Name;return prev;},{});};export var getCounterpartTokens=function getCounterpartTokens(pools,fromToken){return pools.filter(function(cur){return cur.token0Address===fromToken||cur.token1Address;}).reduce(function(prev,curr){if(curr.token0Address===fromToken){prev[curr.token1Address]=curr.token1Name;}else if(curr.token1Address===fromToken){prev[curr.token0Address]=curr.token0Name;}return prev;},{});};export var findPoolByTokens=function findPoolByTokens(pools,fromToken,toToken){if(!Array.isArray(pools)||!fromToken||!toToken)return undefined;return pools.find(function(cur){return cur.token0Address===fromToken&&cur.token1Address===toToken||cur.token1Address===fromToken&&cur.token0Address===toToken;});};export var isOperationPending=function isOperationPending(operationState){return operationState.status===\"PendingSignature\"||operationState.status===\"Mining\";};export var isOperationFailed=function isOperationFailed(operationState){return operationState.status===\"Fail\"||operationState.status===\"Exception\";};export var isOperationSucceeded=function isOperationSucceeded(operationState){return operationState.status===\"Success\";};export var getFailureMessage=function getFailureMessage(swapApproveState,swapExecuteState){if(isOperationPending(swapApproveState)||isOperationPending(swapExecuteState)){return undefined;}if(isOperationFailed(swapApproveState)){return\"Approval failed - \"+swapApproveState.errorMessage;}if(isOperationFailed(swapExecuteState)){return\"Swap failed - \"+swapExecuteState.errorMessage;}return undefined;};export var getSuccessMessage=function getSuccessMessage(swapApproveState,swapExecuteState){if(isOperationPending(swapExecuteState)||isOperationPending(swapApproveState)){return undefined;}if(isOperationSucceeded(swapExecuteState)){return\"Swap executed successfully\";}if(isOperationSucceeded(swapApproveState)){return\"Approval successful\";}return undefined;};export var useAmountsOut=function useAmountsOut(pairAddress,amountIn,fromToken,toToken){var _useCall;var isValidAmountIn=amountIn.gt(parseUnits(\"0\"));var areParamsValid=!!(pairAddress&&isValidAmountIn&&fromToken&&toToken);var _ref=(_useCall=useCall(areParamsValid&&{contract:new Contract(ROUTER_ADDRESS,abis.router02),method:\"getAmountsOut\",args:[amountIn,[fromToken,toToken]]}))!==null&&_useCall!==void 0?_useCall:{},error=_ref.error,value=_ref.value;return error?parseUnits(\"0\"):value===null||value===void 0?void 0:value.amounts[1];};export var useOnClickOutside=function useOnClickOutside(ref,handler){useEffect(function(){var listener=function listener(event){// Do nothing if clicking ref's element or descendent elements\nif(!ref.current||ref.current.contains(event.target)){return;}handler(event);};document.addEventListener(\"mousedown\",listener);document.addEventListener(\"touchstart\",listener);return function(){document.removeEventListener(\"mousedown\",listener);document.removeEventListener(\"touchstart\",listener);};},[ref,handler]);};","map":{"version":3,"names":["Contract","abis","useCall","parseUnits","useEffect","ROUTER_ADDRESS","getAvailableTokens","pools","reduce","prev","curr","token0Address","token0Name","token1Address","token1Name","getCounterpartTokens","fromToken","filter","cur","findPoolByTokens","toToken","Array","isArray","undefined","find","isOperationPending","operationState","status","isOperationFailed","isOperationSucceeded","getFailureMessage","swapApproveState","swapExecuteState","errorMessage","getSuccessMessage","useAmountsOut","pairAddress","amountIn","isValidAmountIn","gt","areParamsValid","contract","router02","method","args","error","value","amounts","useOnClickOutside","ref","handler","listener","event","current","contains","target","document","addEventListener","removeEventListener"],"sources":["C:/Users/HP 250 G1/web3-dex/packages/react-app/src/utils/helpers.js"],"sourcesContent":["\r\nimport { Contract } from \"@ethersproject/contracts\";\r\nimport { abis } from \"@my-app/contracts\";\r\nimport { useCall } from \"@usedapp/core\";\r\nimport { parseUnits } from \"ethers/lib/utils\";\r\nimport { useEffect } from \"react\";\r\n\r\nimport { ROUTER_ADDRESS } from \"../config\";\r\n\r\nexport const getAvailableTokens = (pools) =>\r\n  pools.reduce((prev, curr) => {\r\n    prev[curr.token0Address] = curr.token0Name;\r\n    prev[curr.token1Address] = curr.token1Name;\r\n    return prev;\r\n  }, {});\r\n\r\nexport const getCounterpartTokens = (pools, fromToken) => pools\r\n  .filter((cur) => cur.token0Address === fromToken || cur.token1Address)\r\n  .reduce((prev, curr) => {\r\n    if (curr.token0Address === fromToken) {\r\n      prev[curr.token1Address] = curr.token1Name;\r\n    } else if (curr.token1Address === fromToken) {\r\n      prev[curr.token0Address] = curr.token0Name;\r\n    }\r\n    return prev;\r\n  }, {});\r\n\r\n\r\nexport const findPoolByTokens = (pools, fromToken, toToken) => {\r\n  if (!Array.isArray(pools) || !fromToken || !toToken) return undefined;\r\n\r\n  return pools.find((cur) =>\r\n    (cur.token0Address === fromToken && cur.token1Address === toToken) ||\r\n    (cur.token1Address === fromToken && cur.token0Address === toToken)\r\n  );\r\n};\r\n\r\nexport const isOperationPending = (operationState) => \r\n  operationState.status === \"PendingSignature\" || operationState.status === \"Mining\";\r\nexport const isOperationFailed = (operationState) =>\r\noperationState.status === \"Fail\" || operationState.status === \"Exception\";\r\nexport const isOperationSucceeded = (operationState) =>\r\noperationState.status === \"Success\";\r\n\r\nexport const getFailureMessage = (swapApproveState, swapExecuteState) => {\r\n  if (isOperationPending(swapApproveState) || isOperationPending(swapExecuteState)) {\r\n    return undefined;\r\n  }\r\n\r\n  if (isOperationFailed(swapApproveState)) {\r\n    return \"Approval failed - \" + swapApproveState.errorMessage;\r\n  }\r\n\r\n  if (isOperationFailed(swapExecuteState)) {\r\n    return \"Swap failed - \" + swapExecuteState.errorMessage;\r\n  }\r\n\r\n  return undefined;\r\n};\r\n\r\nexport const getSuccessMessage = (swapApproveState, swapExecuteState) => {\r\n  if (isOperationPending(swapExecuteState) ||isOperationPending(swapApproveState)) {\r\n    return undefined;\r\n  }\r\n\r\n  if (isOperationSucceeded(swapExecuteState)) {\r\n    return \"Swap executed successfully\";\r\n  }\r\n\r\n  if (isOperationSucceeded(swapApproveState)) {\r\n    return \"Approval successful\";\r\n  }\r\n\r\n  return undefined;\r\n};\r\n\r\nexport const useAmountsOut = (pairAddress, amountIn, fromToken, toToken) => {\r\n  const isValidAmountIn = amountIn.gt(parseUnits(\"0\"));\r\n  const areParamsValid = !!(pairAddress && isValidAmountIn && fromToken && toToken);\r\n\r\n  const { error, value } =\r\n    useCall(\r\n      areParamsValid && {\r\n        contract: new Contract(ROUTER_ADDRESS, abis.router02),\r\n        method: \"getAmountsOut\",\r\n        args: [amountIn, [fromToken, toToken]],\r\n      }\r\n    ) ?? {};\r\n  return error ? parseUnits(\"0\") : value?.amounts[1];\r\n}\r\n\r\nexport const useOnClickOutside = (ref, handler) => {\r\n  useEffect(() => {\r\n    const listener = (event) => {\r\n      // Do nothing if clicking ref's element or descendent elements\r\n      if (!ref.current || ref.current.contains(event.target)) {\r\n        return;\r\n      }\r\n      handler(event);\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", listener);\r\n    document.addEventListener(\"touchstart\", listener);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", listener);\r\n      document.removeEventListener(\"touchstart\", listener);\r\n    };\r\n  }, [ref, handler]);\r\n}"],"mappings":"AACA,OAASA,QAAT,KAAyB,0BAAzB,CACA,OAASC,IAAT,KAAqB,mBAArB,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,SAAT,KAA0B,OAA1B,CAEA,OAASC,cAAT,KAA+B,WAA/B,CAEA,MAAO,IAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,KAAD,QAChCA,MAAK,CAACC,MAAN,CAAa,SAACC,IAAD,CAAOC,IAAP,CAAgB,CAC3BD,IAAI,CAACC,IAAI,CAACC,aAAN,CAAJ,CAA2BD,IAAI,CAACE,UAAhC,CACAH,IAAI,CAACC,IAAI,CAACG,aAAN,CAAJ,CAA2BH,IAAI,CAACI,UAAhC,CACA,MAAOL,KAAP,CACD,CAJD,CAIG,EAJH,CADgC,EAA3B,CAOP,MAAO,IAAMM,qBAAoB,CAAG,QAAvBA,qBAAuB,CAACR,KAAD,CAAQS,SAAR,QAAsBT,MAAK,CAC5DU,MADuD,CAChD,SAACC,GAAD,QAASA,IAAG,CAACP,aAAJ,GAAsBK,SAAtB,EAAmCE,GAAG,CAACL,aAAhD,EADgD,EAEvDL,MAFuD,CAEhD,SAACC,IAAD,CAAOC,IAAP,CAAgB,CACtB,GAAIA,IAAI,CAACC,aAAL,GAAuBK,SAA3B,CAAsC,CACpCP,IAAI,CAACC,IAAI,CAACG,aAAN,CAAJ,CAA2BH,IAAI,CAACI,UAAhC,CACD,CAFD,IAEO,IAAIJ,IAAI,CAACG,aAAL,GAAuBG,SAA3B,CAAsC,CAC3CP,IAAI,CAACC,IAAI,CAACC,aAAN,CAAJ,CAA2BD,IAAI,CAACE,UAAhC,CACD,CACD,MAAOH,KAAP,CACD,CATuD,CASrD,EATqD,CAAtB,EAA7B,CAYP,MAAO,IAAMU,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACZ,KAAD,CAAQS,SAAR,CAAmBI,OAAnB,CAA+B,CAC7D,GAAI,CAACC,KAAK,CAACC,OAAN,CAAcf,KAAd,CAAD,EAAyB,CAACS,SAA1B,EAAuC,CAACI,OAA5C,CAAqD,MAAOG,UAAP,CAErD,MAAOhB,MAAK,CAACiB,IAAN,CAAW,SAACN,GAAD,QACfA,IAAG,CAACP,aAAJ,GAAsBK,SAAtB,EAAmCE,GAAG,CAACL,aAAJ,GAAsBO,OAA1D,EACCF,GAAG,CAACL,aAAJ,GAAsBG,SAAtB,EAAmCE,GAAG,CAACP,aAAJ,GAAsBS,OAF1C,EAAX,CAAP,CAID,CAPM,CASP,MAAO,IAAMK,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,cAAD,QAChCA,eAAc,CAACC,MAAf,GAA0B,kBAA1B,EAAgDD,cAAc,CAACC,MAAf,GAA0B,QAD1C,EAA3B,CAEP,MAAO,IAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACF,cAAD,QACjCA,eAAc,CAACC,MAAf,GAA0B,MAA1B,EAAoCD,cAAc,CAACC,MAAf,GAA0B,WAD7B,EAA1B,CAEP,MAAO,IAAME,qBAAoB,CAAG,QAAvBA,qBAAuB,CAACH,cAAD,QACpCA,eAAc,CAACC,MAAf,GAA0B,SADU,EAA7B,CAGP,MAAO,IAAMG,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,gBAAD,CAAmBC,gBAAnB,CAAwC,CACvE,GAAIP,kBAAkB,CAACM,gBAAD,CAAlB,EAAwCN,kBAAkB,CAACO,gBAAD,CAA9D,CAAkF,CAChF,MAAOT,UAAP,CACD,CAED,GAAIK,iBAAiB,CAACG,gBAAD,CAArB,CAAyC,CACvC,MAAO,qBAAuBA,gBAAgB,CAACE,YAA/C,CACD,CAED,GAAIL,iBAAiB,CAACI,gBAAD,CAArB,CAAyC,CACvC,MAAO,iBAAmBA,gBAAgB,CAACC,YAA3C,CACD,CAED,MAAOV,UAAP,CACD,CAdM,CAgBP,MAAO,IAAMW,kBAAiB,CAAG,QAApBA,kBAAoB,CAACH,gBAAD,CAAmBC,gBAAnB,CAAwC,CACvE,GAAIP,kBAAkB,CAACO,gBAAD,CAAlB,EAAuCP,kBAAkB,CAACM,gBAAD,CAA7D,CAAiF,CAC/E,MAAOR,UAAP,CACD,CAED,GAAIM,oBAAoB,CAACG,gBAAD,CAAxB,CAA4C,CAC1C,MAAO,4BAAP,CACD,CAED,GAAIH,oBAAoB,CAACE,gBAAD,CAAxB,CAA4C,CAC1C,MAAO,qBAAP,CACD,CAED,MAAOR,UAAP,CACD,CAdM,CAgBP,MAAO,IAAMY,cAAa,CAAG,QAAhBA,cAAgB,CAACC,WAAD,CAAcC,QAAd,CAAwBrB,SAAxB,CAAmCI,OAAnC,CAA+C,cAC1E,GAAMkB,gBAAe,CAAGD,QAAQ,CAACE,EAAT,CAAYpC,UAAU,CAAC,GAAD,CAAtB,CAAxB,CACA,GAAMqC,eAAc,CAAG,CAAC,EAAEJ,WAAW,EAAIE,eAAf,EAAkCtB,SAAlC,EAA+CI,OAAjD,CAAxB,CAEA,mBACElB,OAAO,CACLsC,cAAc,EAAI,CAChBC,QAAQ,CAAE,GAAIzC,SAAJ,CAAaK,cAAb,CAA6BJ,IAAI,CAACyC,QAAlC,CADM,CAEhBC,MAAM,CAAE,eAFQ,CAGhBC,IAAI,CAAE,CAACP,QAAD,CAAW,CAACrB,SAAD,CAAYI,OAAZ,CAAX,CAHU,CADb,CADT,qCAOO,EAPP,CAAQyB,KAAR,MAAQA,KAAR,CAAeC,KAAf,MAAeA,KAAf,CAQA,MAAOD,MAAK,CAAG1C,UAAU,CAAC,GAAD,CAAb,CAAqB2C,KAArB,SAAqBA,KAArB,iBAAqBA,KAAK,CAAEC,OAAP,CAAe,CAAf,CAAjC,CACD,CAbM,CAeP,MAAO,IAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,GAAD,CAAMC,OAAN,CAAkB,CACjD9C,SAAS,CAAC,UAAM,CACd,GAAM+C,SAAQ,CAAG,QAAXA,SAAW,CAACC,KAAD,CAAW,CAC1B;AACA,GAAI,CAACH,GAAG,CAACI,OAAL,EAAgBJ,GAAG,CAACI,OAAJ,CAAYC,QAAZ,CAAqBF,KAAK,CAACG,MAA3B,CAApB,CAAwD,CACtD,OACD,CACDL,OAAO,CAACE,KAAD,CAAP,CACD,CAND,CAQAI,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,CAAuCN,QAAvC,EACAK,QAAQ,CAACC,gBAAT,CAA0B,YAA1B,CAAwCN,QAAxC,EAEA,MAAO,WAAM,CACXK,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,CAA0CP,QAA1C,EACAK,QAAQ,CAACE,mBAAT,CAA6B,YAA7B,CAA2CP,QAA3C,EACD,CAHD,CAID,CAhBQ,CAgBN,CAACF,GAAD,CAAMC,OAAN,CAhBM,CAAT,CAiBD,CAlBM"},"metadata":{},"sourceType":"module"}